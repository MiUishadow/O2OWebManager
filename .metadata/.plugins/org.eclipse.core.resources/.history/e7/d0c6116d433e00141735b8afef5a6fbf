package com.o2oweb.action;

import java.util.Date;
import java.util.List;

import javax.annotation.Resource;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;

import com.o2oweb.entity.Order;
import com.o2oweb.service.OrderService;
import com.o2oweb.util.BaseAction;

@Scope("request")
@Service("orderAction")
public class OrderAction extends BaseAction {

	private OrderService orderService;
	private Integer orderId;
	private String orderNum;
	private Integer userId;
	private Date startTime;
	private Date finishTime;
	private String orderName;
	private String address;
	private boolean isPaied;
	private boolean chekOut;

	public void save() {
		Order order = new Order(orderNum, userId, startTime, finishTime,
				orderName, address, isPaied, chekOut);

		this.orderService.save(order);

		writeResponse("true");
	}

	public void remove() {
		Order order = new Order();
		order.setOrderId(orderId);

		this.orderService.remove(order);

		writeResponse("true");
	}

	public void update() {
		Order order = new Order(orderNum, userId, startTime, finishTime,
				orderName, address, isPaied, chekOut);
		order.setOrderId(orderId);

		this.orderService.update(order);

		writeResponse("true");
	}

	public void getorder() {
		order order = this.orderService.getLevel(orderId);

		JSONObject obj = JSONObject.fromObject(order);
		writeResponse(obj.toString());
	}

	public void getAllLevel() {
		List<order> levels = this.orderService.getAllLevel(levelId);

		JSONArray array = JSONArray.fromObject(levels);
		writeResponse(array.toString());
	}

	public void getNextLevels() {
		List<order> levels = this.orderService.getNextLevels(levelId);

		JSONArray array = JSONArray.fromObject(levels);
		writeResponse(array.toString());
	}

	public OrderService getOrderService() {
		return orderService;
	}

	@Resource
	public void setOrderService(OrderService orderService) {
		this.orderService = orderService;
	}

	public Integer getOrderId() {
		return orderId;
	}

	public void setOrderId(Integer orderId) {
		this.orderId = orderId;
	}

	public String getOrderNum() {
		return orderNum;
	}

	public void setOrderNum(String orderNum) {
		this.orderNum = orderNum;
	}

	public Integer getUserId() {
		return userId;
	}

	public void setUserId(Integer userId) {
		this.userId = userId;
	}

	public Date getStartTime() {
		return startTime;
	}

	public void setStartTime(Date startTime) {
		this.startTime = startTime;
	}

	public Date getFinishTime() {
		return finishTime;
	}

	public void setFinishTime(Date finishTime) {
		this.finishTime = finishTime;
	}

	public String getOrderName() {
		return orderName;
	}

	public void setOrderName(String orderName) {
		this.orderName = orderName;
	}

	public String getAddress() {
		return address;
	}

	public void setAddress(String address) {
		this.address = address;
	}

	public boolean isPaied() {
		return isPaied;
	}

	public void setPaied(boolean isPaied) {
		this.isPaied = isPaied;
	}

	public boolean isChekOut() {
		return chekOut;
	}

	public void setChekOut(boolean chekOut) {
		this.chekOut = chekOut;
	}

}
