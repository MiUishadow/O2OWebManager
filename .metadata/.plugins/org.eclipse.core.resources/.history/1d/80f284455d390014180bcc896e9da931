/* SVN.committedRevision=1052730 */
var commonSymbol="[\\,\\`\\~\\!\\@\\#\\$\\%\\\\^\\&\\*\\(\\)\\-\\_\\=\\+\\[\\{\\]\\}\\\\|\\;\\:\\'\\'\\"\\"\\<\\>\\/?]+";
var spliter=",";function showoff(b){var a=b.split("_");if(a[0]!="password"){jQuery("#"+a[0]+"_error").hide();jQuery("#"+a[0]+"_tip").show()}jQuery("#"+b+"").hide()}function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function ltrim(a){return a.replace(/(^\s*)/g,"")}function rtrim(a){return a.replace(/(\s*$)/g,"")}function isSameWord(d){var b;if(d!=null&&d!=""){b=d.charCodeAt(0);b="\\"+b.toString(8);var a="["+b+"]{"+(d.length)+"}";var c=new RegExp(a);return c.test(d)}return true}function hideOtherTips(a){if(jQuery("#"+a+"").val()==""){jQuery("#"+a+"_error").hide();jQuery("#"+a+"_tip").show()}jQuery("#"+a+"").parents("li").removeClass("cur_error")}function check_email(){var a=jQuery("#email").val();
if(a==""){return 1}var b=/^\w[\w\$\^\(\)\[\]\{\}\.\-\+,]{0,100}@([a-zA-Z0-9][\w\-]*\.)+[a-zA-Z]{2,6}$/;if(!b.test(a)){return 2}if(a.length>100){return 3}if((/@yahoo.cn$\b/).test(a.toLowerCase())||(/@yahoo.com.cn$\b/).test(a.toLowerCase())){return 4}return 0}function check_phone(){var a=jQuery("#phone").val();if(a==""||a=="请输入手机号码"){return 1}var b=/^1\d{10}$/;if(!b.test(a)){return 2}return 0}function check_pwd1(g){var h=$("#"+g).val();if(h==""){return 1}if(h.length>20){return 2}if(h.length<6){return 3}var f=/\s+/;if(f.test(h)){return 4}var a=/^[0-9]+$/;if(a.test(h)){return 5}var b=/^[a-zA-Z]+$/;if(b.test(h)){return 6}var i=/^[^0-9A-Za-z]+$/;if(i.test(h)){return 7}if(isSameWord(h)){return 8}var e="d*"+commonSymbol+"";var d="\\\d+[A-Za-z]|[A-Za-z]+[0-9]+|[A-Za-z]+"+commonSymbol+"[0-9]+|[A-Za-z]+[0-9]+"+commonSymbol+"|"+e+"";
var c=new RegExp(d);if(!c.test(h)){return 10}return 0}function check_pwd2(b){var a=$("#"+b).val();var c=$("#"+b+"2").val();if(c==""){return 1}if(a!=c){return 2}return 0}function check_referer(){var a=$("#referer").val().replace(/(^ *)|( *$)/g,"");if(a!=""){if($("#refererDesc").html().indexOf("image")==-1){return 1}}}function showErrorInfo(c,b){jQuery("#"+c+"").html("<u></u>"+b+"").show();jQuery("#"+c+"").parents("li").addClass("cur_error");var a=c.split("_");jQuery("#"+a[0]+"_desc").hide()}function showPassError(a,b){jQuery("#"+a+"_tip").hide();jQuery("#"+a+"_Level").hide();showErrorInfo(a+"_error",b)}function showPass2Error(a,b){jQuery("#"+a+"2_tip").hide();showErrorInfo(a+"2_error",b)}function showEmailError(a){jQuery("#email_tip").hide();showErrorInfo("email_error",a)}function showPhoneError(a){jQuery("#phone_tip").hide();
showErrorInfo("phone_error",a)}function checkCodeOnBlur(b){var a=jQuery("#"+b).val();if(a==""||a.length!=4){$("#"+b+"_wrong").show();jQuery("#"+b+"_wrong").parents("li").addClass("cur_error")}}function checkEmailOnBlur(){var a=check_email();if(a==1){showEmailError("不能为空")}else{if(a==2){showEmailError("格式错误，请输入正确的邮箱")}else{if(a==3){showEmailError("邮箱长度不能超过100位字符")}else{if(a==4){showEmailError("雅虎中国邮箱已停用，请更换邮箱注册")}else{$.ajax({type:"POST",url:"/check/check_email.do",data:{userEmail:$("#email").val()},success:function(b){if(b.checkResult==0){jQuery("#email_tip").hide();$("#email_desc").css("display","block");jQuery("#email").parents("li").removeClass("cur_error")}else{if(b.checkResult==1){showEmailError("该邮箱已存在，<a href='/passport/login_input.do'>登录</a>")}}}})}}}}}function checkPhoneOnBlur(){var a=check_phone();
if(a==1){showPhoneError("不能为空")}else{if(a==2){showPhoneError("格式错误，请输入正确的手机号码")}else{$.ajax({type:"POST",url:"/check/check_phone.do",data:{validPhone:$("#phone").val()},success:function(b){if(b.checkResult==0){jQuery("#phone_tip").hide();$("#phone_desc").css("display","block");jQuery("#phone").parents("li").removeClass("cur_error")}else{if(b.checkResult==1){showPhoneError("该手机号已存在，<a href='/passport/login_input.do'>登录</a>")}}}})}}}function checkPasswordOnBlur(a){hideOtherTips(a);var b=check_pwd1(a);if(b!=0){jQuery("#"+a+"2").attr("readonly","readonly")}if(b==1){showPassError(a,"密码不能为空")}else{if(b==2){showPassError(a,"密码为6-20位字符")}else{if(b==3){showPassError(a,"密码为6-20位字符")}else{if(b==4){showPassError(a,"密码中不允许有空格")}else{if(b==5){showPassError(a,"密码不能全为数字")}else{if(b==6){showPassError(a,"密码不能全为字母，请包含至少1个数字或符号 ")
}else{if(b==7){showPassError(a,"密码不能全为符号")}else{if(b==8){showPassError(a,"密码不能全为相同字符或数字")}else{var c;if(a.indexOf("phone")>-1){c={userName:$("#phone").val(),password:$("#"+a).val()}}else{c={userEmail:$("#email").val(),password:$("#"+a).val()}}jQuery.ajax({type:"POST",url:"/check/check_unsafeInfo.do",data:c,success:function(d){switch(d.checkResult){case 1:showPassError(a,"您的密码存在安全隐患,请更改 ");break;case 0:jQuery("#"+a+"2").removeAttr("readonly");break;default:jQuery("#"+a+"2").removeAttr("readonly");break}}})}}}}}}}}}function checkPassword2OnBlur(b){var a=check_pwd2(b);if(a==1){showPass2Error(b,"确认密码不能为空 ")}else{if(a==2){showPass2Error(b,"两次密码输入不一致")}else{$("#"+b+"2_desc").show();jQuery("#"+b+"2").parents("li").removeClass("cur_error")}}}function checkRefererOnBlur(){var a=$("#referer").val().replace(/(^ *)|( *$)/g,"");
if(a!=""){$("#refererDesc").load("/check/check_referer.do?userAccount="+encodeURI($("#referer").val()));return false}}function getPassPoint(c){var b=jQuery(c).val();var a=checkPassLength(b);a=a+checkPassSymbol(b);a=a+checkPassNumAndWord(b);a=a+(checkPassAll(b));a=a+checkPassAlpha(b);a=a+checkPassNum(b);return a}function checkPassLength(a){if(a.length>6&&a.length<8){return 10}if(a.length>=8){return 25}return 0}function checkPassSymbol(a){if(getSymbolPattern(2).test(a)){return 25}else{if(getSymbolPattern(1).test(a)){return 10}}return 0}function getSymbolPattern(c){var a=""+commonSymbol.substr(0,commonSymbol.length-1)+"{"+c+",}";var b=new RegExp(a);return b}var patternNumAlpha=/^(?=.*\d.*)(?=.*[a-zA-Z].*)./;function checkPassNumAndWord(a){if(patternNumAlpha.test(a)){return 5}return 0}function isDigit(b){var a=/(?=.*[0-9])/;
return getCompareResult(a,b)}function isBigWord(b){var a=/(?=.*[A-Z])/;return getCompareResult(a,b)}function isSymbol(c){var b="(?=.*"+commonSymbol.substr(0,commonSymbol.length-1)+")";var a=new RegExp(b);return getCompareResult(a,c)}function isSmallWord(b){var a=/(?=.*[a-z])/;return getCompareResult(a,b)}function getCompareResult(a,b){if(a.test(b)){return true}return false}function checkPassAll(a){if(isDigit(a)&&isBigWord(a)&&isSmallWord(a)&&isSymbol(a)){return 5}if(patternNumAlpha.test(a)){if(isSymbol(a)){return 3}else{return 2}}return 0}function checkPassAlpha(b){var c=/^[a-z]+$|^[A-Z]+$/;if(c.test(b)){return 10}var a=/.*?[A-Z]+?.*?[a-z]+?.*?|.*?[a-z]+?.*[A-Z]+?.*?/;if(a.test(b)){return 25}return 0}function checkPassNum(a){if(getNumPattern(3).test(a)){return 20}if(getNumPattern(1).test(a)){return 10
}return 0}function getNumPattern(c){var a="[0-9]{"+c+",}";var b=new RegExp(a);return b}function refresh_valid_code(){var b=$("#valid_code_pic");var a="/passport/valid_code.do";if(valid_code_service_flag==1){a=URLPrefix.validCodeShowUrl}if(b){b.attr("src",a+"?t="+Math.random())}}function checkRefererLink(){var a=location.search;if(a.indexOf("rlink")!=-1){$("#referer").attr("readonly","readonly")}}function checkPassWordContent(b){jQuery("#"+b).parents("li").removeClass("cur_error");var a=jQuery("#"+b).val();if(a.length>0){changePassStrong(b)}else{hideOtherTips(b)}}function passwordOnFocus(b){var a=jQuery("#"+b);if(a.val()==""){hideOtherTips(b);return}checkPassWordContent(b);hideOtherTips(b+"2");showoff(b+"2_desc")}function changePassStrong(b){var a=jQuery("#"+b);if(check_pwd1(b)==0){jQuery("#"+b+"2").removeAttr("readonly");
jQuery("#"+b+"2").css("background-color",a.css("background-color"))}else{jQuery("#"+b+"2").attr("readonly","readonly");jQuery("#"+b+"2").css("background-color","#D2D2D5")}if(a.val().length==0){jQuery("#"+b+"_Level").hide();hideOtherTips(b);return}else{jQuery("#"+b+"_tip").hide();jQuery("#"+b+"_error").hide()}}function forbidBackSpace(){if(window.event.keyCode==8){window.event.keyCode=0}};