<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ include file="/pages/include/taglib.jsp"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>注册I·快客</title>
<link href="${ctxRoot}/pages/css/base.css" rel="stylesheet" type="text/css" />
<link href="${ctxRoot}/pages/css/regist.css" rel="stylesheet" type="text/css" />
<script src="${ctxRoot}/pages/js/jquery-1.8.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="${ctxRoot}/pages/js/jquery.cookie.js"></script>


</head>

<body>
<!--注册登录头部 begin-->
	    <link rel="shortcut icon" href="#"/>
	
  <div class="regist_header clearfix">
	<div class="wrap">
        <a href="#" class="logo"><img src="images/logo_1.png" height="55" alt="爱快客" /></a>
        <div class="regist_header_right clearfix">
        	<!--<a href="#" class="english_edition" id="edition" style="display:none">English</a>-->
            <div class="help_wrap">
                <a class="hd_menu" href="#"><s class="help_ico"></s>帮助中心</a>
                <div class="hd_menu_list">
                    <ul>
                        <li><a href="#">包裹跟踪</a></li>
                        <li><a href="#">常见问题</a></li>
                        <li><a href="#">在线退换货</a></li>
                        <li><a href="#">在线投诉</a></li>
                        <li><a href="#">配送范围</a></li>
                    </ul>
                </div>
            </div>
            <span class="fr">您好，欢迎光临爱快客！ <a href="${ctxRoot}/pages/login.jsp" class="blue_link">请登录</a></span>
        </div>
    </div>
  </div>
	<script type="text/javascript">
		var no3wUrl="#";
		var currSiteId = 1;
		var URLPrefix = {"mymall":"#","passport_statics":"#","yiwangauth":"#","yaowang":"#","tracker":"#","passport":"#","my":"#","central":"#","validCodeShowUrl":"#","mall":"#","passportother":"#"};
		var ikkUrl="#";
        var ikkPassportUrl="#";
        var ikkPassportUrl="#";
        var loli = window['loli'] || {};
        var valid_code_service_flag="1"; 
	</script>
	
  
<!--注册登录头部 end-->
<div class="regist_wrap">
    <div class="mod_regist_wrap">
    	<div class="regist_border clearfix">
        	<div class=" regist_left">
                <!--注册tab begin -->
                <div class="regist_tab">
                    <ul class="clearfix">
                        <li id="email" ><i class="r_mail"></i><span  id="emailbnt">邮箱注册</span></li>
                        <li id="mobile" ><i class="r_mobile"></i><span id="mobilebnt">手机注册</span></li>
                    </ul>
                    <p class="cur_tab"><em></em></p>
                </div>
                <!--注册tab end -->
                <!--邮箱注册 begin -->
                <div class="regist_form">
                	<input type="hidden" name="activities" value="0" id="activities">
					<input type="hidden" name="returnUrl" value="" id="returnUrl">
					<input type="hidden" id="lockEmail" name="lockEmail" value="0">
                    <ul class="clearfix">
                        <!--取得焦点的时候给li加class:cur,错误的时候给li加class：cur_error,正确的时候给li加class：cur_right -->
                        <li>
                            <div class="form_item">
                                <label>电子邮箱：</label>
                                <input type="text" class="ipt gay_text ipt_username" id="email" name="email" autocomplete="off" maxlength='100'  onkeyup="showoff('email_desc');" onblur="checkEmailOnBlur();" onFocus="hideOtherTips('email')";/>
                            </div>
                            <div class="tips_box regist_tips" id="email_tip">
                                <u></u>
                               	 请填写正确的常用邮箱地址，以便 接收订单通知，找回密码等。
                            </div>
                            <div class="tips_box regist_tips_error" id="email_error">
                            </div>
                            <div class="tips_box username_ok" id="email_desc"></div>
                        </li>
                        <li>
                            <div class="form_item">
                                <label>设置密码：</label>
                                <input type="text" class="ipt gay_text" id="password"  name="password"  />
                                <input type="password" class="ipt password none"  oncopy="return false;" oncut="return false;" onpaste="return false;" onblur="checkPasswordOnBlur('password_email');" onFocus="passwordOnFocus('password_email');" onkeyup="changePassStrong('password_email');"/>
                            </div>
                            <div class="tips_box paswd_strength" id="password_email_Level">
                                <i id="arrow_email"></i>
                            </div>
                        </li>
                        <li>
                            <div class="form_item">
                                <label>确认密码：</label>
                                <input type="text" class="ipt gay_text"  id="pwd"  />
                                <input type="password" class="ipt password none" id="password2" name="password2" onblur="checkPassword2OnBlur('password_email');" oncopy="return false;" oncut="return false;" onpaste="return false;" onFocus="hideOtherTips('password_email2')"  onkeyup="showoff('password_email2_desc');showoff('password_email2_error')"/>
                            	<div class="tips_box regist_tips_error" id="password_email2_error">
                            	</div>
								<div class="tips_box username_ok" id="password_email2_desc"></div>
                            </div>
                        </li>
                        <li class="verify_code cur_right">
                            <div class="form_item" style="width:40%">
                                <label>验证码：</label>
                                <input type="text" class="ipt ipt_code gay_text" value="" id="validCode" name="validCode" onkeydown="showoff('code_wrong');" maxlength="4" 
                                />
                                 <!--验证码正确-->
                                <span class="code_right" style="display:none" id="code_right"></span>
                                <!--验证码错误-->
                                <span class="code_wrong" id="code_wrong"></span>
                            </div>
                            <span class="verify_code_box">
                            <img id="valid_code_pic" src="${ctxRoot}/user/validCode" alt="" />
                            </span>
                            <i class="change_code" id="nextImg">换一张</i>
                            <div class="tips_box regist_tips_error" id="valid_code_error">
                            </div>
                            <div class="tips_box username_ok" id="valid_code_desc" style="display: none;"></div>
                        </li>
                        <li class="service_agreement">
                            <a href="#" class="check_agreement">我已阅读并同意 《<a href="#" class="blue_link" target="_blank">爱快客服务协议</a>》</a>
                            <div class="tips_box agreement_tips">
                                <u></u>
                            </div>
                        </li>
                        <li>
                           <span id="password_email_error" style="color: red;"></span>
                        </li>
                        <li class="regist_btn">
                            <button type="button" id="reg">注册</button>
                        </li>
                    </ul>
                </div>
                <!--邮箱注册 end -->

                <!--手机注册 begin -->
                <div class="regist_form" id="mobileDiv" style="display: none">
                    <ul class="clearfix">
                        <!--取得焦点的时候给li加class:cur,错误的时候给li加class：cur_error -->
                        <li>
                            <div class="form_item">
                                <label>手机号：</label>
                                <input type="text" class="ipt gay_text ipt_phone" value="请输入手机号码" id="phone" onkeyup="showoff('phone_desc');" onblur="checkPhoneOnBlur();" onFocus="hideOtherTips('phone')";/>
                            </div>
                            <div class="tips_box regist_tips" id="phone_tip">
                                <u></u>
                                                                                      请填写正确的手机号码，以便 接收订单通知，找回密码等。
                            </div>
                            <div class="tips_box regist_tips_error" id="phone_error">
                            </div>
                            <div class="tips_box username_ok" id="phone_desc"></div>
                        </li>
                        <!--取得焦点的时候给li加class:cur,错误的时候给li加class：cur_error,正确的时候给li加class：cur_right -->
                        <li class="clearfix recv_mobile_code">
                            <div class="form_item" >
                                <label>验证码：</label>
                                <input type="text" class="ipt gay_text ipt_phonecode" value="6位验证码" id="validPhoneCode" onkeydown="showoff('validPhoneCode_wrong');" maxlength="6"/>
                                <span class="code_right" id="validPhoneCode_right">
                                
                                </span>
                                <span class="code_wrong" id="validPhoneCode_wrong" style="display:none"></span>
                            </div>
                            <a href="javascript:" class="receive_code">获取验证码</a>
                        </li>

                        <li>
                            <div class="form_item" >
                                <label>设置密码：</label>
                                <input type="text" class="ipt gay_text" name="pwd" value="6-20个大小写英文字母、符号或数字" />
                                <input type="password" class="ipt password none"  id="password_mobile" name="password2" oncopy="return false;" oncut="return false;" onpaste="return false;" onblur="checkPasswordOnBlur('password_mobile');" onFocus="passwordOnFocus('password_mobile');" onkeyup="changePassStrong('password_mobile');"/>
                            </div>
                            <div class="tips_box regist_tips_error" id="password_mobile_error">
                            </div>
                            <div class="tips_box paswd_strength" id="password_mobile_Level">
                                <i id="arrow_mobile"></i>
                            </div>
                        </li>
                        <li>
                            <div class="form_item">
                                <label>确认密码：</label>
                                <input type="text" class="ipt gay_text" name="pwd" value="请再次输入密码" />
                                <input type="password" class="ipt password none" id="password_mobile2" name="password2" onblur="checkPassword2OnBlur('password_mobile');" oncopy="return false;" oncut="return false;" onpaste="return false;" onFocus="hideOtherTips('password_mobile2')"  onkeyup="showoff('password_mobile2_desc');showoff('password_mobile2_error')"/>
                                <div class="tips_box regist_tips_error" id="password_mobile2_error">
                            	</div>
								<div class="tips_box username_ok" id="password_mobile2_desc"></div>
                            </div>
                        </li>
                        <li class="service_agreement">
                            <a href="#" class="check_agreement">我已阅读并同意 《<a href="#"_blank">爱快客服务协议</a>》</a>
                            <div class="tips_box agreement_tips">
                            </div>
                        </li>
                        <li class="regist_btn">
                            <button type="button"  onclick="javascript:registerByPhoneSubmit();return false;">注册</button>
                        </li>
                    </ul>
                </div>
                <!--手机注册 end -->
            </div>
            <div class="regist_right">
            	<a href="/passport/b2bRegisterInput.do" onclick="addTrackPositionToCookie('1','Passport_B2B_Regist_Click')" class="regits_b2b">企业注册</a>
                <p>立即点击企业注册！</p>
                <div class="wireless_banner none">
                    <a href="#">
                        <img src="" alt="" widht="180" height="160" />
                    </a>
                </div>
            </div>
        </div>
	</div>
</div>
<!-- 注册登录底部-S-zhanghang -->

	<div id="simplefooter"><a href="http://www.miibeian.gov.cn/" target="_blank">沪ICP备00000000号</a>|<a>合字B1.B2-00000000</a>|<a href="#" data-ref="#" target="_blank">营业执照</a><p>Copyright &copy; 爱快客网上超市 2007-2013，All Rights Reserved</p></div><div>
<span style="color: #FFFFFF">
				121!$
				4%&
				4#@
				10!$
		,
</span> 
<span style="color: #FFFFFF">1052730</span>
</div>  
<!-- 注册登录底部-End -->
</body>

<script type="text/javascript">
  $(function(){
  //ajax提交
	  $("#reg").click(function() {
	  var email=$('#email').val();
	  alert(email);
	  var password=$('#password').val();
	  alert(password);
	  var pwd=$('#pwd').val();
	  alert(pwd);
	  var validCode=$('#validCode').val();
	  alert(validCode);
	   //表单验证
	   if(email==""){
	      $('#password_email_error').text("请填写电子邮箱！");
	      return false;
	   }
	    if(password==""){
	      $('#password_email_error').text("请填写密码！");
	      return false;
	   }
	   if(pwd==""){
	      $('#password_email_error').text("请填写确认密码！");
	      return false;
	   }
	   
	     if(validCode==""){
	      $('#password_email_error').text("请填写验证码！");
	      return false;
	   }
	    if(email.indexOf("@")==-1){
	      $('#password_email_error').text("请填写正确的电子邮箱！");
	      return false;
	   }
	   
	      $.ajax({
	          url: '${ctxRoot}/user/userRegOnMail',
	          type: 'post',
	          data: {
	        	      email :email,
	        	      password:password,
	        	      pwd:pwd,
	        	      validCode:validCode
	                  },
	          async:  false,
	          dataType: "json", 
	          success: function(data){
	              alert(data);
	              if(!data.RegResult){
	                   alert("info="+data.info);
	                   $('#password_email_error').text(data.info);
	              }	          					}
	      })
	  });  
	  
	 //下一张验证码
	 $('#nextImg').click(function(){
	       $('#valid_code_pic').attr("src","${ctxRoot}/user/validCode?ramdom="+Math.random());
	 });
  });
  //tab页
    $('#mobilebnt').click(function(){
        $('.regist_form').attr("style","display:none");
        $('#mobileDiv').attr("style","display:inline");
        //加选中样试 
       $(this).closest('ul').next().removeClass('cur_tab');
       $(this).closest('ul').next().addClass('cur_tab_r');
    });
     $('#emailbnt').click(function(){
        $('.regist_form').attr("style","display:inline");
         $('#mobileDiv').attr("style","display:none");
         $(this).closest('ul').next().removeClass('cur_tab_r');
       $(this).closest('ul').next().addClass('cur_tab');
         
    });
  </script>
</html>
