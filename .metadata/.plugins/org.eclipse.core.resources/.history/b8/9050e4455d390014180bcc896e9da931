<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%@ include file="/pages/include/taglib.jsp"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico" />
    <title>Login</title>
    <link href="${ctxRoot}/pages/css/styles.css" type="text/css" media="screen" rel="stylesheet" />
    <link href="${ctxRoot}/pages/css/jquery-ui-1.8.16.custom.css" rel="stylesheet">
    <script src="${ctxRoot}/pages/js/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="${ctxRoot}/pages/js/jquery.keyboard.extension-typing.js"></script>
    <link type="text/css" href="${ctxRoot}/pages/css/keyboard.css" rel="stylesheet" />
    <script type="text/javascript" src="${ctxRoot}/pages/js/jquery.keyboard.js"></script>
    <script type="text/javascript" src="${ctxRoot}/pages/js/jquery.cookie.js"></script>
	<script type="text/javascript" src="${ctxRoot}/pages/js/tracker_t.js"></script>
	<script type="text/javascript" src="${ctxRoot}/pages/js/tracker.js"></script>


    

</head>
<body id="login">
<!--注册登录头部 begin-->
	    <link rel="shortcut icon" href="#"/>
	
  <div class="regist_header clearfix">
	<div class="wrap">
        <a href="#" class="logo_1"><img src="images/logo_1.png" height="55" alt="爱快客" /></a>
        <div class="regist_header_right clearfix">
        	<!--<a href="#" class="english_edition" id="edition" style="display:none">English</a>-->
            
            <span class="fr">您好，欢迎光临爱快客！ <a href="${ctxRoot}/pages/reg.jsp" style="text-decoration:none" class="blue_link">免费注册</a></span>
        </div>
    </div>
  </div>
	<script type="text/javascript">
		var no3wUrl="#";
		var currSiteId = 1;
		var URLPrefix = {"mymall":"#","passport_statics":"#","yiwangauth":"#","yaowang":"#","tracker":"#","passport":"#","my":"#","central":"#","validCodeShowUrl":"#","mall":"#","passportother":"#"};
		var ikkUrl="#";
        var ikkPassportUrl="#";
        var ikkPassportUrl="#";
        var loli = window['loli'] || {};
        var valid_code_service_flag="1"; 
	</script>
	
  
<!--注册登录头部 end-->
    <div id="wrappertop">
    </div>
    <div id="wrapper">
        <div id="content">
            <div id="header">
                <h1>
                    <a href="#">
                       <img src="${ctxRoot}/pages/images/logo.png"    alt="logo"></a></h1>
            </div>
            <div id="darkbanner" class="banner320">
                <h2>
                    登陆I·快客</h2>
            </div>
            <div id="darkbannerwrap">
            </div>
            <fieldset class="form">
                <p>
                    <label class="loginlabel" for="user_name">
                        登陆账号:</label>
                    <input class="logininput ui-keyboard-input ui-widget-content ui-corner-all" name="user_name"
                        id="user_name" type="text" value="" />
                </p>
                <p>
                    <label class="loginlabel" for="user_password">
                        密码:</label>
                    <span>
                        <input class="logininput"   name="user_password" id="user_password" type="password" /><img
                            id="passwd" class="tooltip" alt="Click to open the virtual keyboard" title="Click to open the virtual keyboard"
                            src="${ctxRoot}/pages/images/keyboard.png" /></span>
                </p>
                <p>
                <span style="color: red;margin-left: 20%" id="error"></span>
                </p>
                <button id="loginbtn" type="button" class="positive" name="Submit">
                    <img src="${ctxRoot}/pages/images/key.png" alt="Announcement" />登陆</button>
                <ul id="forgottenpassword">
                    <li class="boldtext">|</li>
                    <li>
                        <input id="remember" type="checkbox" name="remember" id="rememberMe"><label for="rememberMe">记住登陆</label></li>
                </ul>
            </fieldset>
        </div>
    </div>
    <div id="wrapperbottom_branding">
        <div id="wrapperbottom_branding_text">
            Copyright By:<a href="#" style='text-decoration: none'>Outstanding </a>
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#user_password').keyboard({
                openOn: null,
                stayOpen: true,
                layout: 'qwerty'
            }).addTyping();
            $('#passwd').click(function() {
                $('#user_password').getkeyboard().reveal();
            })

            $(".logininput").blur(function() {
                if ($(this).val() == "") {
                    $(this).css("border-color", "red");
                                    }
                else
                    $(this).css("border-color", "#D9D6C4");
            })

            $("#loginbtn").click(function() {
                var k = 0;
                var ajaxhtml = "";
                $(".logininput").each(function(i, obj) {
                    if ($(obj).val().trim() == "") {
                        k++;
                        $(this).css("border-color", "red");
                        $(this).focus();
                        return false;
                    }
                });
                if (k != 0) return;
                ajaxhtml = $("#loginbtn").html();
                $("#loginbtn").html("Loading....  <img src='loading.gif' alt='Announcement' /> ");
                $("#loginbtn").attr("disabled", "disabled");

            })
        });
        
    </script>
    <script type="text/javascript">
  $(function(){
	  $("#loginbtn").click(function() {
	 // alert($('#user_name').val());
	  // alert($('#user_password').val());
	      $.ajax({
	          url: '${ctxRoot}/user/userLogin',
	          type: 'post',
	          data: {
	        	      user_name :$('#user_name').val(),
	        	      user_password:$('#user_password').val()
	                  },
	          async:  false,
	          dataType: "json", 
	          success: function(data){
	              alert(data);
	              if(!data.RegResult){
	                   alert("info="+data.info);
	                   $('#error').text(data.info);
	              }	          					}
	      })
	  });  
  });
  </script>
</body>
