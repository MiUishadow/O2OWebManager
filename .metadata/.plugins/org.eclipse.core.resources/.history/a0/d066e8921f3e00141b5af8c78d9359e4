package com.o2oweb.action;

import java.util.List;

import javax.annotation.Resource;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;

import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;

import com.o2oweb.entity.Item;
import com.o2oweb.service.ItemService;
import com.o2oweb.util.BaseAction;

@Scope("request")
@Service("itemAction")
public class ItemAction extends BaseAction {

	private ItemService itemService;
	private Integer itemId;
	private String itemName;
	private Integer levelId;
	private float price;
	private float inPrice;
	private Integer discount;
	private Integer sailerId;
	private Integer imageId;
	private String itemDetail;
	private Integer stockNum;
	private String barCode;

	public void save() {
		item item = new item();
		item.setAttributeDetail(attributeDetail);
		item.setFatherId(fatherId);
		item.setItemId(itemId);

		this.itemService.save(item);

		writeResponse("true");
	}

	public void remove() {
		item item = new item();
		item.setitemId(itemId);

		this.itemService.remove(item);

		writeResponse("true");
	}

	public void update() {
		item item = new item();
		item.setitemId(itemId);
		item.setAttributeDetail(attributeDetail);
		item.setFatherId(fatherId);
		item.setItemId(itemId);

		this.itemService.update(item);

		writeResponse("true");
	}

	public void getitem() {
		item item = this.itemService
				.getitem(itemId);

		JSONObject obj = JSONObject.fromObject(item);
		writeResponse(obj.toString());
	}

	public void getAttributesByItemId() {
		List<item> attributes = this.itemService
				.getAttributes(itemId);

		JSONArray array = JSONArray.fromObject(attributes);
		writeResponse(array.toString());
	}
}
