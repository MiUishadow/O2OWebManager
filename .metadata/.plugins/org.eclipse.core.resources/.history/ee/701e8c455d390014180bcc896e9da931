Array.prototype.toTRACKERJSONString=function(){var a="[";for(var b=0;b<this.length;b++){if(this[b] instanceof Parameter){if(this[b].value instanceof Array){a+="{"+this[b].key+"="+this[b].value.toTRACKERJSONString()+"},"}else{a+=this[b].toJSONString()+","}}}if(a.indexOf(",")>0){a=a.substring(0,a.length-1)}return a+"]"};var trackerUrl="";function Parameter(a,b){this.key=a;if(this.key=="internalKeyword"){this.value=encodeURI(b)}else{this.value=b}this.toJSONString=function(){return"{"+this.key+"="+this.value+"}"}}var linkPosition="";var buttonPosition="";function TrackerContainer(a){this.url=a;this.parameterArray=new Array();this.stockArray=new Array();this.commonAttached=new Array();this.addParameter=function(b){this.parameterArray.push(b)};this.addStock=function(c,b){this.stockArray.push(new Parameter(c,b))
};this.addCommonAttached=function(b,c){this.commonAttached.push(new Parameter(b,c))};this.buildAttached=function(){if(this.stockArray.length>0){this.commonAttached.push(new Parameter("1",this.stockArray))}if(this.commonAttached.length>0){this.addParameter(new Parameter("attachedInfo",this.commonAttached.toTRACKERJSONString("attachedInfo")))}};this.toUrl=function(){this.buildAttached();for(var c=0;c<this.parameterArray.length;c++){var b=this.parameterArray[c].key;var d=this.parameterArray[c].value;this.url+="&"+b+"="+d}trackerUrl=this.url;return this.url}}var trackerUrl=("https:"==document.location.protocol?"https://":"http://")+URLPrefix.tracker+"/tracker/info.do?1=1";var trackerContainer=new TrackerContainer(trackerUrl);var ieVersion=navigator.userAgent||"";var platform=navigator.platform||"";
trackerContainer.addParameter(new Parameter("ieVersion",ieVersion));trackerContainer.addParameter(new Parameter("platform",platform));var page_refer=document.referrer?document.referrer:"";var page_location=window.location.href;function addTrackPositionToCookie(b,a){document.cookie="linkPosition="+encodeURIComponent(a)+";path=/;domain=."+no3wUrl+";"}function getCookie(a){var c=document.cookie;var d=c.split("; ");for(var b=0;b<d.length;b++){var e=d[b].split("=");if(e[0]==a){return e[1]}}return null}var e1=new RegExp("exfield1=[^;]*;*","i");var e2=new RegExp("exfield2=[^;]*;*","i");var e3=new RegExp("exfield3=[^;]*;*","i");var e4=new RegExp("exfield4=[^;]*;*","i");var e5=new RegExp("exfield5=[^;]*;*","i");function recordTrackInfoWithType(m,g,e,l){var c=("https:"==document.location.protocol?"https://":"http://")+URLPrefix.tracker+"/related/info.do?1=1";
var h={};if(m&&g){h.infoType=m;h.relatedInfo=encodeURIComponent(g)||"";h.attachedInfo=encodeURIComponent(e)||"";if(document){h.url=document.URL||"";h.infoPreviousUrl=document.referrer||""}h.ieVersion=ieVersion;h.platform=platform;if(l){var f=e1.exec(l);if(f){h.exField1=f[0].replace(/exfield1=/i,"").replace(";","")}var d=e2.exec(l);if(d){h.exField2=d[0].replace(/exfield2=/i,"").replace(";","")}var b=e3.exec(l);if(b){h.exField3=b[0].replace(/exfield3=/i,"").replace(";","")}var a=e4.exec(l);if(a){h.exField4=a[0].replace(/exfield4=/i,"").replace(";","")}var n=e5.exec(l);if(n){h.exField5=n[0].replace(/exfield5=/i,"").replace(";","")}}for(var k in h){c+="&"+k+"="+encodeURIComponent(h[k])}var j=new Image(1,1);j.src=c}}function gotracker(d,e,c){var a=trackerUrl;var b=new RegExp("&linkPosition=\\w*","g");
a=a.replace(b,"");var b=new RegExp("&buttonPosition=\\w*","g");a=a.replace(b,"");var b=new RegExp("&productId=\\w*","g");a=a.replace(b,"");if(e!=null){a=a+"&buttonPosition="+e}if(c!=null){a=a+"&productId="+c}jQuery.ajax({async:true,url:a,type:"GET",dataType:"jsonp",jsonp:"jsoncallback"})}function bindLinkClickTracker(c,b){var a=jQuery("#"+c+" a");a.click(function(){var d=jQuery(this).text();d=b+"_"+encodeURIComponent(jQuery.trim(d));addTrackPositionToCookie("1",d)})}function callLoadCookie(){var a="";if(page_location.indexOf("yihaodian.com")!=-1&&page_refer.indexOf("1mall.com")!=-1){a=URLPrefix.mall}else{if(page_location.indexOf("1mall.com")!=-1&&page_refer.indexOf("yihaodian.com")!=-1){a=URLPrefix.central}}if(a!=""){if("https:"==document.location.protocol){a=a.replace("http","https")}jQuery.getJSON(a+"/yhd-common/assign-login-api.do?cookieNames=unionKey&cookieNames=adgroupKeywordID&cookieNames=unionType&cookieNames=uid&cookieNames=websiteid&callback=?",function(b){if(!b.ERROR){jQuery(b.info).each(function(){if(this.value!=""){var c=new Date();
c.setTime(c.getTime()+(1*24*3600000));jQuery.cookie(this.name,this.value,{domain:no3wUrl,path:"/",expires:c})}})}})}}function callLoadlinkCookie(){var a="";if(page_location.indexOf("yihaodian.com")!=-1){a=URLPrefix.mall}else{if(page_location.indexOf("1mall.com")!=-1){a=URLPrefix.central}}if(a!=""){if("https:"==document.location.protocol){a=a.replace("http","https")}var b=a+"/yhd-common/assign-login-api.do?cookieNames=linkPosition&callback=?";jQuery.ajax({async:true,url:b,timeout:1000,type:"GET",dataType:"jsonp",jsonp:"jsoncallback",success:function(c){if(!c.ERROR){jQuery(c.info).each(function(){if(this.value!=""){var d="";trackerContainer.addParameter(new Parameter(this.name,this.value));d="cookieDatas="+this.name+",,"+this.value+",,0";callAddCookieApi(a,d)}})}},complete:function(){initHijack()
},statusCode:{404:function(){initHijack()}}})}else{initHijack()}}function callAddCookieApi(a,b){jQuery.ajax({async:true,url:a+"/yhd-common/cookie-set-api.do?"+b+"&callback=?",timeout:1000,type:"GET",dataType:"jsonp",jsonp:"jsoncallback",success:function(c){}})}callLoadCookie();