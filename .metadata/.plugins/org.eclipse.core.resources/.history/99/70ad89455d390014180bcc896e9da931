/* SVN.committedRevision=1052730 */
var clickFlag=false;var nowid;var totalid;var can1press=false;var emailafter;var emailbefor;var isShow=true;var isRed=true;var showCodeFlag=false;$(document).ready(function(){$("#validCode").val("");var a=$("#lockEmail").val();if(a=="1"){clickFlag=false;var b=check_email();if(b==1){a="2";showEmailError("不能为空")}else{if(b==2){a="2";showEmailError("格式错误，请输入正确的邮箱")}else{if(b==3){a="2";showEmailError("邮箱长度不能超过100位字符")}else{if(b==4){a="2";showEmailError("雅虎中国邮箱已停用，请更换邮箱注册")}else{$.ajax({type:"POST",url:"/check/check_email.do",data:{userEmail:$("#email").val()},success:function(c){if(c.checkResult==0){jQuery("#email_tip").hide();$("#email_desc").css("display","block");jQuery("#email").parents("li").removeClass("cur_error");$("#email").attr("readonly","readonly").css("background-color","#C0C1C4")}else{if(c.checkResult==1){a="2";
showEmailError("该邮箱已存在，<a href='/passport/login_input.do'>登录</a>")}}}})}}}}$("#lockEmail").val(a);if(isRed==false){jQuery("#email").removeClass("redErorBodr")}}else{jQuery("#email").keyup(function(d){var c=d.which;if(c==8){isShow=true}})}jQuery("#validCode").keydown(function(d){var c=d.which;if(c==13){registerSubmit()}if(c==27){}});jQuery("#email").keypress(function(d){var c=d.which;if(c==8){isShow=true}});$("#email").focus(function(){jQuery("#email").removeClass("redErorBodr");$("#myemail").remove();nowid=undefined;hideOtherTips("email");$(this).after("<div id='myemail' class='associat_input'></div>");if($("#myemail").html()){$("#myemail").css("display","block");$(".newemail").css("width",$("#myemail").width());can1press=true}else{$("#myemail").css("display","none");can1press=false}}).keyup(function(){if(clickFlag==false){$("#myemail").remove();
$(this).after("<div id='myemail' class='associat_input'></div>");if($("#myemail").html()){$("#myemail").css("display","block");can1press=true}else{$("#myemail").css("display","none");can1press=false}}var f=$("#email").val();if((f!=""||f!=null)&&clickFlag==false&&isShow==true){var g="";var d=new Array("@163.com","@qq.com","@126.com","@hotmail.com","@gmail.com","@sohu.com","@139.com","@sina.com.cn","@vip.sina.com","@msn.com");totalid=d.length;if(!(isEmail(f))){for(var e=0;e<d.length;e++){g=g+"<a class='newemail'  onclick=''>";g=g+f+d[e]+"</a>"}}else{emailbefor=f.split("@")[0];emailafter="@"+f.split("@")[1];for(var e=0;e<d.length;e++){var c=d[e];if(c.indexOf(emailafter)==0){g=g+"<a class='newemail'  onclick=''>";g=g+emailbefor+d[e]+"</a>"}}}$("#myemail").html(g);if($("#myemail").html()){$("#myemail").css("display","block");
can1press=true}else{$("#myemail").css("display","none");can1press=false}beforepress=f}if(f==""||f==null){$("#myemail").html("");$("#myemail").css("display","none")}});$(document).click(function(){if(can1press){$("#myemail").remove();can1press=false;nowid=undefined}});$(".newemail").live("mouseover",function(){$(".newemail").css("background","#FFFFFF");$(this).css("background","#E0EEE0");jQuery("#email").removeClass("redErorBodr");$(this).focus();nowid=$(this).index()}).live("click",function(){var c=$("#email").val().replace(/@.*$/g,"")+"@"+$(this).html().replace(/^.*@/g,"");jQuery("#email").removeClass("redErorBodr");$("#email").val(c);$("#myemail").remove();nowid=undefined;jQuery("#email_error").hide();checkEmailOnBlur()});$(document).bind("keydown",function(d){if(can1press){switch(d.which){case 38:d.preventDefault();
if(nowid>0){isRed=false;clickFlag=true;$(".newemail").css("background","#FFF");$(".newemail").eq(nowid).prev().css("background","#CACACA").focus();nowid=nowid-1}if(!nowid){isRed=false;clickFlag=true;nowid=0;$(".newemail").css("background","#FFF");$(".newemail").eq(nowid).css("background","#CACACA");$(".newemail").eq(nowid).focus()}break;case 40:d.preventDefault();if(nowid<totalid){clickFlag=true;isRed=false;$(".newemail").css("background","#FFF");$(".newemail").eq(nowid).next().css("background","#CACACA").focus();nowid=nowid+1}if(!nowid){nowid=0;clickFlag=true;isRed=false;$(".newemail").css("background","#FFF");$(".newemail").eq(nowid).css("background","#CACACA");$(".newemail").eq(nowid).focus()}break;case 13:clickFlag=false;isRed=false;var c=$("#email").val().replace(/@.*$/g,"")+"@"+$(".newemail").eq(nowid).html().replace(/^.*@/g,"");
$("#email").val(c);$("#myemail").remove();nowid=undefined;jQuery("#email_error").hide();jQuery("#email").focus();isShow=false;checkEmailOnBlur()}}});refresh_valid_code()});function isEmail(a){if(a.indexOf("@")>0){return true}else{return false}}function doSubmit(a){if(doSubmitPwd(a)==false){return false}var b=check_email();if(b==1){showEmailError("不能为空");return false}else{if(b==2){showEmailError("");$("#email_error").html("格式错误，请输入正确的邮箱");return false}else{if(b==3){showEmailError("");$("#email_error").html("邮箱长度不能超过100位字符");return false}else{if(b==4){showEmailError("");$("#email_error").html("雅虎中国邮箱已停用，请更换邮箱注册");return false}else{if($("#email_desc").html()=="重复的email"){$("#email").focus();return false}}}}}return true}function doPhoneSubmit(b){if(doSubmitPwd(b)==false){return false}var a=check_phone();
if(a==1){showPhoneError("不能为空");return false}else{if(a==2){showPhoneError("格式错误，请输入正确的手机号码");return false}}return true}function doSubmitPwd(b){var c=check_pwd1(b);if(c==1){showPassError(b,"密码不能为空");return false}if(c==2){showPassError(b,"密码为6-20位字符");return false}if(c==3){showPassError(b,"密码为6-20位字符");return false}if(c==4){showPassError(b,"密码中不允许有空格");return false}if(c==5){showPassError(b,"密码不能全为数字");return false}if(c==6){showPassError(b,"密码不能全为字母，请包含至少1个数字或符号 ");return false}if(c==7){showPassError(b,"密码不能全为符号");return false}if(c==8){showPassError(b,"密码不能全为相同字符或数字");return false}var a=check_pwd2(b);if(a==1){showPass2Error(b,"确认密码不能为空");return false}else{if(a==2){showPass2Error(b,"两次密码输入不一致");return false}}};